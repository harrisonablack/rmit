.ORIG x3000

GETP

ST R0, P_X
ST R1, P_Y
ST R2, P_Z

; X+2, Z+2
ADD R0, R0, #2
ADD R2, R2, #2
JSR BUILDLAMP

; X+2, Z-2
ADD R2, R2, #-4
JSR BUILDLAMP

; X-2 Z-2

ADD R0, R0, #-4
JSR BUILDLAMP

; X-2 Z+2

ADD R2, R2, #4
JSR BUILDLAMP

HALT

BUILDLAMP
	LD R1, P_Y
	LD R3 STONE
	SETB
	ADD R1, R1, #1
	SETB
	ADD R1, R1, #1
	SETB
	LD R3, GLOWSTONE
	ADD R1, R1, #1
	SETB

	RET

P_X .FILL #0
P_Y .FILL #0
P_Z .FILL #0

STONE			.FILL #1
GLOWSTONE .FILL #89

.END
